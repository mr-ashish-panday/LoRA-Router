ashish@khwopaserver:~/LoRA-Router$ cat ~/LoRA-Router/data/results/*.json
{
  "n_100": {
    "loss": 0.8453797996044159,
    "f1": 0.7272727272727273,
    "precision": 0.5714285714285714,
    "recall": 1.0,
    "auroc": 0.3571428571428572,
    "optimal_threshold": 0.5,
    "optimal_f1": 0.7272727272727273
  },
  "n_250": {
    "loss": 1.0136540353298187,
    "f1": 0.5,
    "precision": 0.35294117647058826,
    "recall": 0.8571428571428571,
    "auroc": 0.41071428571428575,
    "optimal_threshold": 0.3,
    "optimal_f1": 0.5384615384615384
  },
  "n_500": {
    "loss": 0.6855614012793491,
    "f1": 0.6352941176470588,
    "precision": 0.5294117647058824,
    "recall": 0.7941176470588235,
    "auroc": 0.6578192252510761,
    "optimal_threshold": 0.5,
    "optimal_f1": 0.6352941176470588
  },
  "n_1000": {
    "loss": 0.7676977562276941,
    "f1": 0.5955056179775281,
    "precision": 0.4818181818181818,
    "recall": 0.7794117647058824,
    "auroc": 0.5661764705882353,
    "optimal_threshold": 0.4,
    "optimal_f1": 0.6192893401015228
  }
}{
  "rank_2": {
    "loss": 0.7920586953037664,
    "f1": 0.4722222222222222,
    "precision": 0.4473684210526316,
    "recall": 0.5,
    "auroc": 0.4964131994261119,
    "optimal_threshold": 0.4,
    "optimal_f1": 0.5714285714285714
  },
  "rank_4": {
    "loss": 0.9199657095106024,
    "f1": 0.6213592233009708,
    "precision": 0.463768115942029,
    "recall": 0.9411764705882353,
    "auroc": 0.47991391678622675,
    "optimal_threshold": 0.5,
    "optimal_f1": 0.6213592233009708
  },
  "rank_8": {
    "loss": 0.8056065534290514,
    "f1": 0.4691358024691358,
    "precision": 0.40425531914893614,
    "recall": 0.5588235294117647,
    "auroc": 0.40530846484935434,
    "optimal_threshold": 0.3,
    "optimal_f1": 0.6346153846153846
  }
}{
  "qv": {
    "loss": 0.7255625379712958,
    "f1": 0.6292134831460674,
    "precision": 0.509090909090909,
    "recall": 0.8235294117647058,
    "auroc": 0.5903873744619799,
    "optimal_threshold": 0.3,
    "optimal_f1": 0.6476190476190476
  },
  "qkvo": {
    "loss": 0.7757301903084705,
    "f1": 0.27906976744186046,
    "precision": 0.6666666666666666,
    "recall": 0.17647058823529413,
    "auroc": 0.5286944045911047,
    "optimal_threshold": 0.3,
    "optimal_f1": 0.5128205128205128
  }
}{
  "thresh_0.3": {
    "accuracy": 0.05333333333333334,
    "cot_usage_rate": 0.04666666666666667,
    "speedup": 7.04225352112676
  },
  "thresh_0.4": {
    "accuracy": 0.04666666666666667,
    "cot_usage_rate": 0.02666666666666667,
    "speedup": 8.064516129032258
  },
  "thresh_0.5": {
    "accuracy": 0.04666666666666667,
    "cot_usage_rate": 0.013333333333333334,
    "speedup": 8.928571428571427
  },
  "thresh_0.6": {
    "accuracy": 0.04,
    "cot_usage_rate": 0.0,
    "speedup": 10.0
  },
  "thresh_0.7": {
    "accuracy": 0.04,
    "cot_usage_rate": 0.0,
    "speedup": 10.0
  }
}{
  "rank": {
    "rank_2": {
      "loss": 0.7920586953037664,
      "f1": 0.4722222222222222,
      "precision": 0.4473684210526316,
      "recall": 0.5,
      "auroc": 0.4964131994261119,
      "optimal_threshold": 0.4,
      "optimal_f1": 0.5714285714285714
    },
    "rank_4": {
      "loss": 0.9199657095106024,
      "f1": 0.6213592233009708,
      "precision": 0.463768115942029,
      "recall": 0.9411764705882353,
      "auroc": 0.47991391678622675,
      "optimal_threshold": 0.5,
      "optimal_f1": 0.6213592233009708
    },
    "rank_8": {
      "loss": 0.8056065534290514,
      "f1": 0.4691358024691358,
      "precision": 0.40425531914893614,
      "recall": 0.5588235294117647,
      "auroc": 0.40530846484935434,
      "optimal_threshold": 0.3,
      "optimal_f1": 0.6346153846153846
    }
  },
  "targets": {
    "qv": {
      "loss": 0.7255625379712958,
      "f1": 0.6292134831460674,
      "precision": 0.509090909090909,
      "recall": 0.8235294117647058,
      "auroc": 0.5903873744619799,
      "optimal_threshold": 0.3,
      "optimal_f1": 0.6476190476190476
    },
    "qkvo": {
      "loss": 0.7757301903084705,
      "f1": 0.27906976744186046,
      "precision": 0.6666666666666666,
      "recall": 0.17647058823529413,
      "auroc": 0.5286944045911047,
      "optimal_threshold": 0.3,
      "optimal_f1": 0.5128205128205128
    }
  },
  "data_size": {
    "n_100": {
      "loss": 0.8453797996044159,
      "f1": 0.7272727272727273,
      "precision": 0.5714285714285714,
      "recall": 1.0,
      "auroc": 0.3571428571428572,
      "optimal_threshold": 0.5,
      "optimal_f1": 0.7272727272727273
    },
    "n_250": {
      "loss": 1.0136540353298187,
      "f1": 0.5,
      "precision": 0.35294117647058826,
      "recall": 0.8571428571428571,
      "auroc": 0.41071428571428575,
      "optimal_threshold": 0.3,
      "optimal_f1": 0.5384615384615384
    },
    "n_500": {
      "loss": 0.6855614012793491,
      "f1": 0.6352941176470588,
      "precision": 0.5294117647058824,
      "recall": 0.7941176470588235,
      "auroc": 0.6578192252510761,
      "optimal_threshold": 0.5,
      "optimal_f1": 0.6352941176470588
    },
    "n_1000": {
      "loss": 0.7676977562276941,
      "f1": 0.5955056179775281,
      "precision": 0.4818181818181818,
      "recall": 0.7794117647058824,
      "auroc": 0.5661764705882353,
      "optimal_threshold": 0.4,
      "optimal_f1": 0.6192893401015228
    }
  },
  "threshold": {
    "thresh_0.3": {
      "accuracy": 0.05333333333333334,
      "cot_usage_rate": 0.04666666666666667,
      "speedup": 7.04225352112676
    },
    "thresh_0.4": {
      "accuracy": 0.04666666666666667,
      "cot_usage_rate": 0.02666666666666667,
      "speedup": 8.064516129032258
    },
    "thresh_0.5": {
      "accuracy": 0.04666666666666667,
      "cot_usage_rate": 0.013333333333333334,
      "speedup": 8.928571428571427
    },
    "thresh_0.6": {
      "accuracy": 0.04,
      "cot_usage_rate": 0.0,
      "speedup": 10.0
    },
    "thresh_0.7": {
      "accuracy": 0.04,
      "cot_usage_rate": 0.0,
      "speedup": 10.0
    }
  }
}{
  "baselines": {
    "always_direct": {
      "accuracy": 0.5333333333333333,
      "f1": 0.0,
      "precision": 0.0,
      "recall": 0.0,
      "auroc": 0.5,
      "true_positives": 0,
      "false_positives": 0,
      "true_negatives": 40,
      "false_negatives": 35,
      "always_direct_acc": 0.013333333333333334,
      "always_cot_acc": 0.48,
      "routed_acc": 0.013333333333333334,
      "cot_usage_rate": 0.0,
      "routed_total_tokens": 1125,
      "cot_only_tokens": 11250,
      "token_savings": 0.9,
      "routed_time_sec": 93.75,
      "cot_only_time_sec": 937.5,
      "speedup": 10.0
    },
    "always_cot": {
      "accuracy": 0.4666666666666667,
      "f1": 0.6363636363636364,
      "precision": 0.4666666666666667,
      "recall": 1.0,
      "auroc": 0.5,
      "true_positives": 35,
      "false_positives": 40,
      "true_negatives": 0,
      "false_negatives": 0,
      "always_direct_acc": 0.013333333333333334,
      "always_cot_acc": 0.48,
      "routed_acc": 0.48,
      "cot_usage_rate": 1.0,
      "routed_total_tokens": 11250,
      "cot_only_tokens": 11250,
      "token_savings": 0.0,
      "routed_time_sec": 937.5,
      "cot_only_time_sec": 937.5,
      "speedup": 1.0
    },
    "random": {
      "accuracy": 0.5066666666666667,
      "f1": 0.4931506849315068,
      "precision": 0.47368421052631576,
      "recall": 0.5142857142857142,
      "auroc": 0.5,
      "true_positives": 18,
      "false_positives": 20,
      "true_negatives": 20,
      "false_negatives": 17,
      "always_direct_acc": 0.013333333333333334,
      "always_cot_acc": 0.48,
      "routed_acc": 0.25333333333333335,
      "cot_usage_rate": 0.5066666666666667,
      "routed_total_tokens": 6255,
      "cot_only_tokens": 11250,
      "token_savings": 0.444,
      "routed_time_sec": 521.25,
      "cot_only_time_sec": 937.5,
      "speedup": 1.7985611510791366
    },
    "length": {
      "accuracy": 0.5066666666666667,
      "f1": 0.3728813559322034,
      "precision": 0.4583333333333333,
      "recall": 0.3142857142857143,
      "auroc": 0.43000000000000005,
      "true_positives": 11,
      "false_positives": 13,
      "true_negatives": 27,
      "false_negatives": 24,
      "always_direct_acc": 0.013333333333333334,
      "always_cot_acc": 0.48,
      "routed_acc": 0.16,
      "cot_usage_rate": 0.32,
      "routed_total_tokens": 4365,
      "cot_only_tokens": 11250,
      "token_savings": 0.612,
      "routed_time_sec": 363.75,
      "cot_only_time_sec": 937.5,
      "speedup": 2.577319587628866
    },
    "keyword": {
      "accuracy": 0.41333333333333333,
      "f1": 0.4358974358974359,
      "precision": 0.3953488372093023,
      "recall": 0.4857142857142857,
      "auroc": 0.45499999999999996,
      "true_positives": 17,
      "false_positives": 26,
      "true_negatives": 14,
      "false_negatives": 18,
      "always_direct_acc": 0.013333333333333334,
      "always_cot_acc": 0.48,
      "routed_acc": 0.24,
      "cot_usage_rate": 0.5733333333333334,
      "routed_total_tokens": 6930,
      "cot_only_tokens": 11250,
      "token_savings": 0.384,
      "routed_time_sec": 577.5,
      "cot_only_time_sec": 937.5,
      "speedup": 1.6233766233766234
    },
    "entropy": {
      "accuracy": 0.48,
      "f1": 0.6355140186915887,
      "precision": 0.4722222222222222,
      "recall": 0.9714285714285714,
      "auroc": 0.49214285714285716,
      "true_positives": 34,
      "false_positives": 38,
      "true_negatives": 2,
      "false_negatives": 1,
      "always_direct_acc": 0.013333333333333334,
      "always_cot_acc": 0.48,
      "routed_acc": 0.4666666666666667,
      "cot_usage_rate": 0.96,
      "routed_total_tokens": 10845,
      "cot_only_tokens": 11250,
      "token_savings": 0.036,
      "routed_time_sec": 903.75,
      "cot_only_time_sec": 937.5,
      "speedup": 1.037344398340249
    },
    "self_consistency": {
      "accuracy": 0.4666666666666667,
      "f1": 0.5238095238095238,
      "precision": 0.4489795918367347,
      "recall": 0.6285714285714286,
      "auroc": 0.47678571428571426,
      "true_positives": 22,
      "false_positives": 27,
      "true_negatives": 13,
      "false_negatives": 13,
      "always_direct_acc": 0.013333333333333334,
      "always_cot_acc": 0.48,
      "routed_acc": 0.30666666666666664,
      "cot_usage_rate": 0.6533333333333333,
      "routed_total_tokens": 7740,
      "cot_only_tokens": 11250,
      "token_savings": 0.312,
      "routed_time_sec": 645.0,
      "cot_only_time_sec": 937.5,
      "speedup": 1.4534883720930232
    },
    "embedding": {
      "accuracy": 0.5333333333333333,
      "f1": 0.0,
      "precision": 0.0,
      "recall": 0.0,
      "auroc": 0.5,
      "true_positives": 0,
      "false_positives": 0,
      "true_negatives": 40,
      "false_negatives": 35,
      "always_direct_acc": 0.013333333333333334,
      "always_cot_acc": 0.48,
      "routed_acc": 0.013333333333333334,
      "cot_usage_rate": 0.0,
      "routed_total_tokens": 1125,
      "cot_only_tokens": 11250,
      "token_savings": 0.9,
      "routed_time_sec": 93.75,
      "cot_only_time_sec": 937.5,
      "speedup": 10.0
    },
    "oracle": {
      "accuracy": 1.0,
      "f1": 1.0,
      "precision": 1.0,
      "recall": 1.0,
      "auroc": 1.0,
      "true_positives": 35,
      "false_positives": 0,
      "true_negatives": 40,
      "false_negatives": 0,
      "always_direct_acc": 0.013333333333333334,
      "always_cot_acc": 0.48,
      "routed_acc": 0.48,
      "cot_usage_rate": 0.4666666666666667,
      "routed_total_tokens": 5850,
      "cot_only_tokens": 11250,
      "token_savings": 0.48,
      "routed_time_sec": 487.5,
      "cot_only_time_sec": 937.5,
      "speedup": 1.9230769230769231
    }
  },
  "lora_router": {
    "accuracy": 0.4533333333333333,
    "f1": 0.5858585858585859,
    "precision": 0.453125,
    "recall": 0.8285714285714286,
    "auroc": 0.5092857142857143,
    "true_positives": 29,
    "false_positives": 35,
    "true_negatives": 5,
    "false_negatives": 6,
    "always_direct_acc": 0.013333333333333334,
    "always_cot_acc": 0.48,
    "routed_acc": 0.4,
    "cot_usage_rate": 0.8533333333333334,
    "routed_total_tokens": 9765,
    "cot_only_tokens": 11250,
    "token_savings": 0.132,
    "routed_time_sec": 813.75,
    "cot_only_time_sec": 937.5,
    "speedup": 1.152073732718894,
    "ece": 0.37096447229385376,
    "calibration_bins": [
      {
        "bin": 1,
        "confidence": 0.17409640550613403,
        "accuracy": 0.0,
        "count": 1
      },
      {
        "bin": 2,
        "confidence": 0.24235773086547852,
        "accuracy": 0.0,
        "count": 1
      },
      {
        "bin": 3,
        "confidence": 0.3532610908150673,
        "accuracy": 1.0,
        "count": 4
      },
      {
        "bin": 4,
        "confidence": 0.464818662405014,
        "accuracy": 0.4,
        "count": 5
      },
      {
        "bin": 5,
        "confidence": 0.5454123914241791,
        "accuracy": 0.5,
        "count": 2
      },
      {
        "bin": 6,
        "confidence": 0.648283150460985,
        "accuracy": 0.2222222222222222,
        "count": 9
      },
      {
        "bin": 7,
        "confidence": 0.7408408293357263,
        "accuracy": 0.6153846153846154,
        "count": 13
      },
      {
        "bin": 8,
        "confidence": 0.8396752715110779,
        "accuracy": 0.4,
        "count": 10
      },
      {
        "bin": 9,
        "confidence": 0.9513925234476726,
        "accuracy": 0.4666666666666667,
        "count": 30
      }
    ]
  }
}{
  "loss": 0.8583016395568848,
  "f1": 0.6170212765957447,
  "precision": 0.4915254237288136,
  "recall": 0.8285714285714286,
  "auroc": 0.5907142857142856,
  "mean_prob_positive": 0.6808104344776699,
  "mean_prob_negative": 0.6214159984141588,
  "predictions_inverted": ashish@khwopaserver:~/LoRA-Router$ 